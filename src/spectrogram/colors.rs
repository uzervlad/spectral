// Colormap data partially derived from the "roseus" project
//
// MIT License
//
// Copyright (c) 2021 Myungchul Keum
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.

use egui::Color32;
use serde::{Deserialize, Serialize};

type ColorTuple = (f32, f32, f32);

const ROSEUS_DATA: [ColorTuple; 256] = [
	(0.004528, 0.004341, 0.004307),
	(0.005625, 0.006156, 0.006010),
	(0.006628, 0.008293, 0.008161),
	(0.007551, 0.010738, 0.010790),
	(0.008382, 0.013482, 0.013941),
	(0.009111, 0.016520, 0.017662),
	(0.009727, 0.019846, 0.022009),
	(0.010223, 0.023452, 0.027035),
	(0.010593, 0.027331, 0.032799),
	(0.010833, 0.031475, 0.039361),
	(0.010941, 0.035875, 0.046415),
	(0.010918, 0.040520, 0.053597),
	(0.010768, 0.045158, 0.060914),
	(0.010492, 0.049708, 0.068367),
	(0.010098, 0.054171, 0.075954),
	(0.009594, 0.058549, 0.083672),
	(0.008989, 0.062840, 0.091521),
	(0.008297, 0.067046, 0.099499),
	(0.007530, 0.071165, 0.107603),
	(0.006704, 0.075196, 0.115830),
	(0.005838, 0.079140, 0.124178),
	(0.004949, 0.082994, 0.132643),
	(0.004062, 0.086758, 0.141223),
	(0.003198, 0.090430, 0.149913),
	(0.002382, 0.094010, 0.158711),
	(0.001643, 0.097494, 0.167612),
	(0.001009, 0.100883, 0.176612),
	(0.000514, 0.104174, 0.185704),
	(0.000187, 0.107366, 0.194886),
	(0.000066, 0.110457, 0.204151),
	(0.000186, 0.113445, 0.213496),
	(0.000587, 0.116329, 0.222914),
	(0.001309, 0.119106, 0.232397),
	(0.002394, 0.121776, 0.241942),
	(0.003886, 0.124336, 0.251542),
	(0.005831, 0.126784, 0.261189),
	(0.008276, 0.129120, 0.270876),
	(0.011268, 0.131342, 0.280598),
	(0.014859, 0.133447, 0.290345),
	(0.019100, 0.135435, 0.300111),
	(0.024043, 0.137305, 0.309888),
	(0.029742, 0.139054, 0.319669),
	(0.036252, 0.140683, 0.329441),
	(0.043507, 0.142189, 0.339203),
	(0.050922, 0.143571, 0.348942),
	(0.058432, 0.144831, 0.358649),
	(0.066041, 0.145965, 0.368319),
	(0.073744, 0.146974, 0.377938),
	(0.081541, 0.147858, 0.387501),
	(0.089431, 0.148616, 0.396998),
	(0.097411, 0.149248, 0.406419),
	(0.105479, 0.149754, 0.415755),
	(0.113634, 0.150134, 0.424998),
	(0.121873, 0.150389, 0.434139),
	(0.130192, 0.150521, 0.443167),
	(0.138591, 0.150528, 0.452075),
	(0.147065, 0.150413, 0.460852),
	(0.155614, 0.150175, 0.469493),
	(0.164232, 0.149818, 0.477985),
	(0.172917, 0.149343, 0.486322),
	(0.181666, 0.148751, 0.494494),
	(0.190476, 0.148046, 0.502493),
	(0.199344, 0.147229, 0.510313),
	(0.208267, 0.146302, 0.517944),
	(0.217242, 0.145267, 0.525380),
	(0.226264, 0.144131, 0.532613),
	(0.235331, 0.142894, 0.539635),
	(0.244440, 0.141559, 0.546442),
	(0.253587, 0.140131, 0.553026),
	(0.262769, 0.138615, 0.559381),
	(0.271981, 0.137016, 0.565500),
	(0.281222, 0.135335, 0.571381),
	(0.290487, 0.133581, 0.577017),
	(0.299774, 0.131757, 0.582404),
	(0.309080, 0.129867, 0.587538),
	(0.318399, 0.127920, 0.592415),
	(0.327730, 0.125921, 0.597032),
	(0.337069, 0.123877, 0.601385),
	(0.346413, 0.121793, 0.605474),
	(0.355758, 0.119678, 0.609295),
	(0.365102, 0.117540, 0.612846),
	(0.374443, 0.115386, 0.616127),
	(0.383774, 0.113226, 0.619138),
	(0.393096, 0.111066, 0.621876),
	(0.402404, 0.108918, 0.624343),
	(0.411694, 0.106794, 0.626540),
	(0.420967, 0.104698, 0.628466),
	(0.430217, 0.102645, 0.630123),
	(0.439442, 0.100647, 0.631513),
	(0.448637, 0.098717, 0.632638),
	(0.457805, 0.096861, 0.633499),
	(0.466940, 0.095095, 0.634100),
	(0.476040, 0.093433, 0.634443),
	(0.485102, 0.091885, 0.634532),
	(0.494125, 0.090466, 0.634370),
	(0.503104, 0.089190, 0.633962),
	(0.512041, 0.088067, 0.633311),
	(0.520931, 0.087108, 0.632420),
	(0.529773, 0.086329, 0.631297),
	(0.538564, 0.085738, 0.629944),
	(0.547302, 0.085346, 0.628367),
	(0.555986, 0.085162, 0.626572),
	(0.564615, 0.085190, 0.624563),
	(0.573187, 0.085439, 0.622345),
	(0.581698, 0.085913, 0.619926),
	(0.590149, 0.086615, 0.617311),
	(0.598538, 0.087543, 0.614503),
	(0.606862, 0.088700, 0.611511),
	(0.615120, 0.090084, 0.608343),
	(0.623312, 0.091690, 0.605001),
	(0.631438, 0.093511, 0.601489),
	(0.639492, 0.095546, 0.597821),
	(0.647476, 0.097787, 0.593999),
	(0.655389, 0.100226, 0.590028),
	(0.663230, 0.102856, 0.585914),
	(0.670995, 0.105669, 0.581667),
	(0.678686, 0.108658, 0.577291),
	(0.686302, 0.111813, 0.572790),
	(0.693840, 0.115129, 0.568175),
	(0.701300, 0.118597, 0.563449),
	(0.708682, 0.122209, 0.558616),
	(0.715984, 0.125959, 0.553687),
	(0.723206, 0.129840, 0.548666),
	(0.730346, 0.133846, 0.543558),
	(0.737406, 0.137970, 0.538366),
	(0.744382, 0.142209, 0.533101),
	(0.751274, 0.146556, 0.527767),
	(0.758082, 0.151008, 0.522369),
	(0.764805, 0.155559, 0.516912),
	(0.771443, 0.160206, 0.511402),
	(0.777995, 0.164946, 0.505845),
	(0.784459, 0.169774, 0.500246),
	(0.790836, 0.174689, 0.494607),
	(0.797125, 0.179688, 0.488935),
	(0.803325, 0.184767, 0.483238),
	(0.809435, 0.189925, 0.477518),
	(0.815455, 0.195160, 0.471781),
	(0.821384, 0.200471, 0.466028),
	(0.827222, 0.205854, 0.460267),
	(0.832968, 0.211308, 0.454505),
	(0.838621, 0.216834, 0.448738),
	(0.844181, 0.222428, 0.442979),
	(0.849647, 0.228090, 0.437230),
	(0.855019, 0.233819, 0.431491),
	(0.860295, 0.239613, 0.425771),
	(0.865475, 0.245471, 0.420074),
	(0.870558, 0.251393, 0.414403),
	(0.875545, 0.257380, 0.408759),
	(0.880433, 0.263427, 0.403152),
	(0.885223, 0.269535, 0.397585),
	(0.889913, 0.275705, 0.392058),
	(0.894503, 0.281934, 0.386578),
	(0.898993, 0.288222, 0.381152),
	(0.903381, 0.294569, 0.375781),
	(0.907667, 0.300974, 0.370469),
	(0.911849, 0.307435, 0.365223),
	(0.915928, 0.313953, 0.360048),
	(0.919902, 0.320527, 0.354948),
	(0.923771, 0.327155, 0.349928),
	(0.927533, 0.333838, 0.344994),
	(0.931188, 0.340576, 0.340149),
	(0.934736, 0.347366, 0.335403),
	(0.938175, 0.354207, 0.330762),
	(0.941504, 0.361101, 0.326229),
	(0.944723, 0.368045, 0.321814),
	(0.947831, 0.375039, 0.317523),
	(0.950826, 0.382083, 0.313364),
	(0.953709, 0.389175, 0.309345),
	(0.956478, 0.396314, 0.305477),
	(0.959133, 0.403499, 0.301766),
	(0.961671, 0.410731, 0.298221),
	(0.964093, 0.418008, 0.294853),
	(0.966399, 0.425327, 0.291676),
	(0.968586, 0.432690, 0.288696),
	(0.970654, 0.440095, 0.285926),
	(0.972603, 0.447540, 0.283380),
	(0.974431, 0.455025, 0.281067),
	(0.976139, 0.462547, 0.279003),
	(0.977725, 0.470107, 0.277198),
	(0.979188, 0.477703, 0.275666),
	(0.980529, 0.485332, 0.274422),
	(0.981747, 0.492995, 0.273476),
	(0.982840, 0.500690, 0.272842),
	(0.983808, 0.508415, 0.272532),
	(0.984653, 0.516168, 0.272560),
	(0.985373, 0.523948, 0.272937),
	(0.985966, 0.531754, 0.273673),
	(0.986436, 0.539582, 0.274779),
	(0.986780, 0.547434, 0.276264),
	(0.986998, 0.555305, 0.278135),
	(0.987091, 0.563195, 0.280401),
	(0.987061, 0.571100, 0.283066),
	(0.986907, 0.579019, 0.286137),
	(0.986629, 0.586950, 0.289615),
	(0.986229, 0.594891, 0.293503),
	(0.985709, 0.602839, 0.297802),
	(0.985069, 0.610792, 0.302512),
	(0.984310, 0.618748, 0.307632),
	(0.983435, 0.626704, 0.313159),
	(0.982445, 0.634657, 0.319089),
	(0.981341, 0.642606, 0.325420),
	(0.980130, 0.650546, 0.332144),
	(0.978812, 0.658475, 0.339257),
	(0.977392, 0.666391, 0.346753),
	(0.975870, 0.674290, 0.354625),
	(0.974252, 0.682170, 0.362865),
	(0.972545, 0.690026, 0.371466),
	(0.970750, 0.697856, 0.380419),
	(0.968873, 0.705658, 0.389718),
	(0.966921, 0.713426, 0.399353),
	(0.964901, 0.721157, 0.409313),
	(0.962815, 0.728851, 0.419594),
	(0.960677, 0.736500, 0.430181),
	(0.958490, 0.744103, 0.441070),
	(0.956263, 0.751656, 0.452248),
	(0.954009, 0.759153, 0.463702),
	(0.951732, 0.766595, 0.475429),
	(0.949445, 0.773974, 0.487414),
	(0.947158, 0.781289, 0.499647),
	(0.944885, 0.788535, 0.512116),
	(0.942634, 0.795709, 0.524811),
	(0.940423, 0.802807, 0.537717),
	(0.938261, 0.809825, 0.550825),
	(0.936163, 0.816760, 0.564121),
	(0.934146, 0.823608, 0.577591),
	(0.932224, 0.830366, 0.591220),
	(0.930412, 0.837031, 0.604997),
	(0.928727, 0.843599, 0.618904),
	(0.927187, 0.850066, 0.632926),
	(0.925809, 0.856432, 0.647047),
	(0.924610, 0.862691, 0.661249),
	(0.923607, 0.868843, 0.675517),
	(0.922820, 0.874884, 0.689832),
	(0.922265, 0.880812, 0.704174),
	(0.921962, 0.886626, 0.718523),
	(0.921930, 0.892323, 0.732859),
	(0.922183, 0.897903, 0.747163),
	(0.922741, 0.903364, 0.761410),
	(0.923620, 0.908706, 0.775580),
	(0.924837, 0.913928, 0.789648),
	(0.926405, 0.919031, 0.803590),
	(0.928340, 0.924015, 0.817381),
	(0.930655, 0.928881, 0.830995),
	(0.933360, 0.933631, 0.844405),
	(0.936466, 0.938267, 0.857583),
	(0.939982, 0.942791, 0.870499),
	(0.943914, 0.947207, 0.883122),
	(0.948267, 0.951519, 0.895421),
	(0.953044, 0.955732, 0.907359),
	(0.958246, 0.959852, 0.918901),
	(0.963869, 0.963887, 0.930004),
	(0.969909, 0.967845, 0.940623),
	(0.976355, 0.971737, 0.950704),
	(0.983195, 0.975580, 0.960181),
	(0.990402, 0.979395, 0.968966),
	(0.997930, 0.983217, 0.976920),
];

const ARCUS_DATA: [ColorTuple; 256] = [
	(0.004528, 0.004341, 0.004307),
	(0.005472, 0.006223, 0.005953),
	(0.006310, 0.008494, 0.007585),
	(0.007156, 0.011127, 0.009040),
	(0.008126, 0.014087, 0.010199),
	(0.009352, 0.017328, 0.010996),
	(0.010969, 0.020799, 0.011411),
	(0.013107, 0.024445, 0.011461),
	(0.015887, 0.028213, 0.011186),
	(0.019419, 0.032052, 0.010641),
	(0.023796, 0.035917, 0.009885),
	(0.029101, 0.039770, 0.008974),
	(0.035402, 0.043457, 0.007962),
	(0.042679, 0.046887, 0.006897),
	(0.050300, 0.050079, 0.005820),
	(0.058097, 0.053047, 0.004764),
	(0.066020, 0.055805, 0.003761),
	(0.074029, 0.058365, 0.002835),
	(0.082087, 0.060744, 0.002010),
	(0.090167, 0.062955, 0.001307),
	(0.098241, 0.065011, 0.000746),
	(0.106291, 0.066928, 0.000349),
	(0.114297, 0.068719, 0.000139),
	(0.122242, 0.070398, 0.000142),
	(0.130113, 0.071979, 0.000386),
	(0.137896, 0.073476, 0.000906),
	(0.145582, 0.074900, 0.001738),
	(0.153159, 0.076267, 0.002927),
	(0.160619, 0.077588, 0.004523),
	(0.167953, 0.078875, 0.006579),
	(0.175154, 0.080142, 0.009159),
	(0.182215, 0.081400, 0.012329),
	(0.189130, 0.082660, 0.016165),
	(0.195893, 0.083932, 0.020747),
	(0.202499, 0.085227, 0.026161),
	(0.208941, 0.086556, 0.032500),
	(0.215217, 0.087927, 0.039861),
	(0.221322, 0.089349, 0.047811),
	(0.227252, 0.090830, 0.055961),
	(0.233003, 0.092377, 0.064315),
	(0.238572, 0.093997, 0.072869),
	(0.243955, 0.095696, 0.081620),
	(0.249151, 0.097481, 0.090560),
	(0.254155, 0.099355, 0.099681),
	(0.258967, 0.101324, 0.108975),
	(0.263583, 0.103390, 0.118433),
	(0.268002, 0.105558, 0.128042),
	(0.272221, 0.107830, 0.137794),
	(0.276240, 0.110209, 0.147673),
	(0.280056, 0.112695, 0.157669),
	(0.283668, 0.115292, 0.167767),
	(0.287075, 0.117999, 0.177957),
	(0.290277, 0.120818, 0.188223),
	(0.293271, 0.123749, 0.198551),
	(0.296058, 0.126792, 0.208930),
	(0.298637, 0.129948, 0.219342),
	(0.301008, 0.133214, 0.229776),
	(0.303169, 0.136593, 0.240217),
	(0.305121, 0.140081, 0.250650),
	(0.306864, 0.143679, 0.261066),
	(0.308398, 0.147385, 0.271446),
	(0.309722, 0.151197, 0.281783),
	(0.310837, 0.155115, 0.292060),
	(0.311743, 0.159137, 0.302267),
	(0.312441, 0.163260, 0.312390),
	(0.312931, 0.167483, 0.322420),
	(0.313212, 0.171804, 0.332345),
	(0.313286, 0.176220, 0.342155),
	(0.313154, 0.180729, 0.351837),
	(0.312816, 0.185328, 0.361385),
	(0.312272, 0.190015, 0.370787),
	(0.311522, 0.194787, 0.380036),
	(0.310569, 0.199642, 0.389123),
	(0.309412, 0.204576, 0.398040),
	(0.308053, 0.209586, 0.406779),
	(0.306492, 0.214669, 0.415333),
	(0.304728, 0.219823, 0.423698),
	(0.302766, 0.225043, 0.431865),
	(0.300603, 0.230327, 0.439831),
	(0.298241, 0.235672, 0.447589),
	(0.295681, 0.241074, 0.455135),
	(0.292922, 0.246529, 0.462465),
	(0.289967, 0.252035, 0.469575),
	(0.286815, 0.257587, 0.476462),
	(0.283467, 0.263184, 0.483123),
	(0.279921, 0.268821, 0.489555),
	(0.276182, 0.274495, 0.495755),
	(0.272248, 0.280202, 0.501722),
	(0.268119, 0.285940, 0.507455),
	(0.263793, 0.291705, 0.512952),
	(0.259274, 0.297494, 0.518212),
	(0.254559, 0.303303, 0.523234),
	(0.249653, 0.309130, 0.528019),
	(0.244547, 0.314972, 0.532566),
	(0.239247, 0.320825, 0.536874),
	(0.233751, 0.326686, 0.540946),
	(0.228057, 0.332553, 0.544781),
	(0.222167, 0.338422, 0.548380),
	(0.216076, 0.344292, 0.551744),
	(0.209784, 0.350158, 0.554875),
	(0.203290, 0.356019, 0.557774),
	(0.196589, 0.361872, 0.560442),
	(0.189684, 0.367714, 0.562881),
	(0.182568, 0.373543, 0.565094),
	(0.175241, 0.379357, 0.567082),
	(0.167694, 0.385153, 0.568847),
	(0.159930, 0.390928, 0.570392),
	(0.151945, 0.396681, 0.571719),
	(0.143725, 0.402409, 0.572831),
	(0.135275, 0.408111, 0.573731),
	(0.126581, 0.413783, 0.574420),
	(0.117634, 0.419426, 0.574901),
	(0.108432, 0.425035, 0.575179),
	(0.098955, 0.430611, 0.575255),
	(0.089204, 0.436149, 0.575133),
	(0.079155, 0.441650, 0.574815),
	(0.068798, 0.447111, 0.574306),
	(0.058110, 0.452530, 0.573607),
	(0.047071, 0.457906, 0.572723),
	(0.035747, 0.463238, 0.571656),
	(0.025570, 0.468524, 0.570409),
	(0.017072, 0.473761, 0.568987),
	(0.010339, 0.478950, 0.567395),
	(0.005439, 0.484088, 0.565631),
	(0.002472, 0.489175, 0.563704),
	(0.001510, 0.494208, 0.561614),
	(0.002644, 0.499187, 0.559366),
	(0.005955, 0.504110, 0.556963),
	(0.011530, 0.508976, 0.554409),
	(0.019456, 0.513784, 0.551708),
	(0.029818, 0.518533, 0.548864),
	(0.042630, 0.523221, 0.545882),
	(0.056071, 0.527847, 0.542763),
	(0.069398, 0.532410, 0.539515),
	(0.082631, 0.536911, 0.536137),
	(0.095784, 0.541345, 0.532638),
	(0.108874, 0.545715, 0.529018),
	(0.121913, 0.550017, 0.525283),
	(0.134909, 0.554251, 0.521439),
	(0.147874, 0.558417, 0.517489),
	(0.160814, 0.562513, 0.513438),
	(0.173735, 0.566538, 0.509292),
	(0.186645, 0.570491, 0.505053),
	(0.199546, 0.574372, 0.500730),
	(0.212448, 0.578179, 0.496322),
	(0.225346, 0.581913, 0.491842),
	(0.238250, 0.585571, 0.487290),
	(0.251158, 0.589154, 0.482676),
	(0.264071, 0.592660, 0.478006),
	(0.276997, 0.596088, 0.473281),
	(0.289931, 0.599439, 0.468515),
	(0.302878, 0.602712, 0.463709),
	(0.315839, 0.605904, 0.458871),
	(0.328810, 0.609018, 0.454013),
	(0.341794, 0.612051, 0.449141),
	(0.354790, 0.615003, 0.444263),
	(0.367800, 0.617874, 0.439387),
	(0.380819, 0.620663, 0.434525),
	(0.393850, 0.623371, 0.429685),
	(0.406889, 0.625996, 0.424879),
	(0.419935, 0.628540, 0.420119),
	(0.432989, 0.631001, 0.415414),
	(0.446047, 0.633380, 0.410778),
	(0.459107, 0.635676, 0.406224),
	(0.472169, 0.637891, 0.401766),
	(0.485223, 0.640025, 0.397423),
	(0.498274, 0.642078, 0.393204),
	(0.511315, 0.644051, 0.389129),
	(0.524345, 0.645943, 0.385215),
	(0.537356, 0.647759, 0.381481),
	(0.550346, 0.649497, 0.377946),
	(0.563309, 0.651159, 0.374631),
	(0.576245, 0.652747, 0.371552),
	(0.589143, 0.654263, 0.368736),
	(0.601999, 0.655709, 0.366204),
	(0.614808, 0.657087, 0.363977),
	(0.627564, 0.658400, 0.362080),
	(0.640259, 0.659651, 0.360537),
	(0.652888, 0.660842, 0.359370),
	(0.665441, 0.661979, 0.358603),
	(0.677910, 0.663064, 0.358262),
	(0.690292, 0.664101, 0.358365),
	(0.702570, 0.665097, 0.358939),
	(0.714740, 0.666055, 0.360003),
	(0.726791, 0.666981, 0.361576),
	(0.738714, 0.667881, 0.363678),
	(0.750499, 0.668761, 0.366324),
	(0.762132, 0.669628, 0.369530),
	(0.773604, 0.670490, 0.373308),
	(0.784902, 0.671353, 0.377668),
	(0.796018, 0.672226, 0.382618),
	(0.806935, 0.673117, 0.388163),
	(0.817642, 0.674035, 0.394306),
	(0.828126, 0.674990, 0.401048),
	(0.838375, 0.675990, 0.408387),
	(0.848375, 0.677046, 0.416319),
	(0.858113, 0.678167, 0.424838),
	(0.867573, 0.679365, 0.433931),
	(0.876744, 0.680650, 0.443591),
	(0.885612, 0.682032, 0.453803),
	(0.894163, 0.683523, 0.464552),
	(0.902384, 0.685133, 0.475819),
	(0.910263, 0.686873, 0.487585),
	(0.917787, 0.688754, 0.499830),
	(0.924943, 0.690786, 0.512527),
	(0.931720, 0.692979, 0.525653),
	(0.938108, 0.695343, 0.539178),
	(0.944096, 0.697887, 0.553072),
	(0.949677, 0.700619, 0.567307),
	(0.954841, 0.703549, 0.581847),
	(0.959583, 0.706681, 0.596660),
	(0.963896, 0.710025, 0.611703),
	(0.967777, 0.713584, 0.626943),
	(0.971223, 0.717363, 0.642337),
	(0.974233, 0.721366, 0.657844),
	(0.976809, 0.725596, 0.673422),
	(0.978953, 0.730053, 0.689030),
	(0.980669, 0.734738, 0.704619),
	(0.981966, 0.739650, 0.720146),
	(0.982850, 0.744787, 0.735568),
	(0.983334, 0.750145, 0.750836),
	(0.983431, 0.755720, 0.765908),
	(0.983157, 0.761506, 0.780737),
	(0.982529, 0.767497, 0.795285),
	(0.981568, 0.773684, 0.809505),
	(0.980297, 0.780058, 0.823357),
	(0.978742, 0.786609, 0.836802),
	(0.976929, 0.793327, 0.849804),
	(0.974887, 0.800200, 0.862328),
	(0.972654, 0.807213, 0.874339),
	(0.970260, 0.814355, 0.885808),
	(0.967745, 0.821610, 0.896708),
	(0.965146, 0.828964, 0.907015),
	(0.962507, 0.836402, 0.916706),
	(0.959873, 0.843905, 0.925762),
	(0.957286, 0.851460, 0.934169),
	(0.954799, 0.859048, 0.941913),
	(0.952460, 0.866650, 0.948986),
	(0.950321, 0.874251, 0.955382),
	(0.948436, 0.881830, 0.961098),
	(0.946860, 0.889369, 0.966137),
	(0.945651, 0.896848, 0.970503),
	(0.944867, 0.904247, 0.974206),
	(0.944568, 0.911546, 0.977260),
	(0.944812, 0.918722, 0.979683),
	(0.945662, 0.925753, 0.981502),
	(0.947177, 0.932615, 0.982752),
	(0.949415, 0.939284, 0.983473),
	(0.952433, 0.945733, 0.983724),
	(0.956279, 0.951937, 0.983578),
	(0.960994, 0.957868, 0.983128),
	(0.966600, 0.963503, 0.982499),
	(0.973090, 0.968822, 0.981846),
	(0.980415, 0.973816, 0.981367),
	(0.988464, 0.978494, 0.981300),
	(0.997025, 0.982900, 0.981925),
];

const LAVENDULA_DATA: [ColorTuple; 256] = [
	(0.004528, 0.004341, 0.004307),
	(0.005833, 0.006026, 0.006282),
	(0.007172, 0.007977, 0.008722),
	(0.008548, 0.010188, 0.011634),
	(0.009946, 0.012654, 0.015042),
	(0.011355, 0.015373, 0.018975),
	(0.012763, 0.018342, 0.023461),
	(0.014159, 0.021558, 0.028532),
	(0.015532, 0.025019, 0.034222),
	(0.016873, 0.028722, 0.040562),
	(0.018174, 0.032664, 0.047143),
	(0.019427, 0.036842, 0.053776),
	(0.020625, 0.041235, 0.060466),
	(0.021761, 0.045606, 0.067217),
	(0.022831, 0.049921, 0.074033),
	(0.023829, 0.054181, 0.080916),
	(0.024751, 0.058389, 0.087872),
	(0.025595, 0.062546, 0.094901),
	(0.026357, 0.066652, 0.102007),
	(0.027035, 0.070708, 0.109193),
	(0.027629, 0.074715, 0.116460),
	(0.028138, 0.078672, 0.123811),
	(0.028562, 0.082581, 0.131246),
	(0.028903, 0.086440, 0.138769),
	(0.029163, 0.090250, 0.146379),
	(0.029346, 0.094011, 0.154079),
	(0.029454, 0.097721, 0.161869),
	(0.029493, 0.101380, 0.169751),
	(0.029471, 0.104987, 0.177723),
	(0.029391, 0.108542, 0.185790),
	(0.029264, 0.112044, 0.193949),
	(0.029099, 0.115492, 0.202200),
	(0.028904, 0.118884, 0.210545),
	(0.028692, 0.122219, 0.218983),
	(0.028476, 0.125496, 0.227514),
	(0.028268, 0.128715, 0.236137),
	(0.028085, 0.131872, 0.244852),
	(0.027940, 0.134968, 0.253660),
	(0.027855, 0.138001, 0.262555),
	(0.027847, 0.140968, 0.271540),
	(0.027935, 0.143869, 0.280613),
	(0.028142, 0.146702, 0.289770),
	(0.028491, 0.149464, 0.299013),
	(0.029007, 0.152156, 0.308337),
	(0.029714, 0.154774, 0.317742),
	(0.030641, 0.157317, 0.327224),
	(0.031818, 0.159784, 0.336781),
	(0.033273, 0.162171, 0.346410),
	(0.035040, 0.164479, 0.356108),
	(0.037151, 0.166704, 0.365872),
	(0.039642, 0.168846, 0.375698),
	(0.042483, 0.170902, 0.385583),
	(0.045621, 0.172871, 0.395521),
	(0.049059, 0.174750, 0.405510),
	(0.052788, 0.176539, 0.415545),
	(0.056802, 0.178235, 0.425621),
	(0.061088, 0.179837, 0.435733),
	(0.065635, 0.181343, 0.445876),
	(0.070434, 0.182752, 0.456046),
	(0.075471, 0.184063, 0.466234),
	(0.080737, 0.185273, 0.476437),
	(0.086220, 0.186382, 0.486648),
	(0.091910, 0.187388, 0.496861),
	(0.097796, 0.188292, 0.507068),
	(0.103872, 0.189090, 0.517265),
	(0.110126, 0.189783, 0.527443),
	(0.116552, 0.190371, 0.537595),
	(0.123141, 0.190851, 0.547715),
	(0.129887, 0.191225, 0.557795),
	(0.136783, 0.191491, 0.567827),
	(0.143821, 0.191651, 0.577803),
	(0.150997, 0.191703, 0.587717),
	(0.158303, 0.191649, 0.597558),
	(0.165737, 0.191488, 0.607322),
	(0.173290, 0.191223, 0.616997),
	(0.180959, 0.190854, 0.626576),
	(0.188738, 0.190382, 0.636052),
	(0.196623, 0.189808, 0.645416),
	(0.204608, 0.189137, 0.654659),
	(0.212690, 0.188367, 0.663775),
	(0.220864, 0.187505, 0.672753),
	(0.229125, 0.186550, 0.681586),
	(0.237470, 0.185508, 0.690267),
	(0.245893, 0.184381, 0.698786),
	(0.254391, 0.183173, 0.707139),
	(0.262959, 0.181890, 0.715314),
	(0.271592, 0.180537, 0.723305),
	(0.280288, 0.179118, 0.731106),
	(0.289042, 0.177638, 0.738710),
	(0.297850, 0.176104, 0.746109),
	(0.306707, 0.174523, 0.753296),
	(0.315608, 0.172904, 0.760266),
	(0.324552, 0.171251, 0.767013),
	(0.333533, 0.169574, 0.773531),
	(0.342547, 0.167882, 0.779815),
	(0.351590, 0.166184, 0.785860),
	(0.360657, 0.164491, 0.791661),
	(0.369747, 0.162810, 0.797215),
	(0.378853, 0.161154, 0.802517),
	(0.387973, 0.159534, 0.807565),
	(0.397102, 0.157961, 0.812354),
	(0.406236, 0.156447, 0.816884),
	(0.415372, 0.155004, 0.821152),
	(0.424506, 0.153645, 0.825155),
	(0.433635, 0.152382, 0.828894),
	(0.442754, 0.151227, 0.832367),
	(0.451860, 0.150194, 0.835575),
	(0.460950, 0.149292, 0.838516),
	(0.470019, 0.148539, 0.841193),
	(0.479065, 0.147939, 0.843605),
	(0.488083, 0.147510, 0.845755),
	(0.497072, 0.147258, 0.847645),
	(0.506028, 0.147191, 0.849275),
	(0.514947, 0.147320, 0.850651),
	(0.523825, 0.147652, 0.851774),
	(0.532662, 0.148191, 0.852648),
	(0.541453, 0.148942, 0.853277),
	(0.550196, 0.149909, 0.853665),
	(0.558889, 0.151093, 0.853816),
	(0.567528, 0.152494, 0.853735),
	(0.576109, 0.154113, 0.853429),
	(0.584633, 0.155947, 0.852902),
	(0.593096, 0.157992, 0.852158),
	(0.601496, 0.160245, 0.851206),
	(0.609830, 0.162701, 0.850050),
	(0.618096, 0.165354, 0.848698),
	(0.626293, 0.168198, 0.847156),
	(0.634419, 0.171224, 0.845429),
	(0.642471, 0.174429, 0.843526),
	(0.650447, 0.177802, 0.841454),
	(0.658348, 0.181337, 0.839217),
	(0.666170, 0.185026, 0.836827),
	(0.673912, 0.188862, 0.834290),
	(0.681573, 0.192836, 0.831610),
	(0.689151, 0.196943, 0.828797),
	(0.696646, 0.201175, 0.825858),
	(0.704056, 0.205526, 0.822801),
	(0.711379, 0.209988, 0.819634),
	(0.718615, 0.214556, 0.816363),
	(0.725763, 0.219224, 0.812996),
	(0.732822, 0.223987, 0.809540),
	(0.739791, 0.228839, 0.806003),
	(0.746670, 0.233776, 0.802392),
	(0.753457, 0.238793, 0.798716),
	(0.760152, 0.243886, 0.794978),
	(0.766755, 0.249052, 0.791188),
	(0.773264, 0.254286, 0.787353),
	(0.779679, 0.259586, 0.783481),
	(0.786002, 0.264948, 0.779574),
	(0.792228, 0.270370, 0.775645),
	(0.798361, 0.275849, 0.771694),
	(0.804398, 0.281382, 0.767733),
	(0.810340, 0.286968, 0.763766),
	(0.816186, 0.292604, 0.759799),
	(0.821936, 0.298289, 0.755839),
	(0.827591, 0.304020, 0.751892),
	(0.833149, 0.309797, 0.747963),
	(0.838611, 0.315618, 0.744059),
	(0.843977, 0.321481, 0.740184),
	(0.849246, 0.327385, 0.736343),
	(0.854419, 0.333330, 0.732543),
	(0.859496, 0.339313, 0.728790),
	(0.864476, 0.345334, 0.725088),
	(0.869361, 0.351393, 0.721440),
	(0.874149, 0.357488, 0.717853),
	(0.878841, 0.363618, 0.714332),
	(0.883438, 0.369783, 0.710882),
	(0.887938, 0.375982, 0.707506),
	(0.892343, 0.382214, 0.704208),
	(0.896653, 0.388479, 0.700993),
	(0.900867, 0.394775, 0.697867),
	(0.904987, 0.401103, 0.694833),
	(0.909011, 0.407461, 0.691894),
	(0.912941, 0.413850, 0.689052),
	(0.916777, 0.420268, 0.686316),
	(0.920519, 0.426715, 0.683686),
	(0.924167, 0.433190, 0.681166),
	(0.927721, 0.439693, 0.678761),
	(0.931183, 0.446224, 0.676472),
	(0.934551, 0.452781, 0.674306),
	(0.937828, 0.459364, 0.672262),
	(0.941012, 0.465972, 0.670346),
	(0.944104, 0.472606, 0.668561),
	(0.947105, 0.479264, 0.666908),
	(0.950015, 0.485946, 0.665391),
	(0.952834, 0.492650, 0.664015),
	(0.955564, 0.499378, 0.662779),
	(0.958204, 0.506127, 0.661689),
	(0.960754, 0.512898, 0.660745),
	(0.963216, 0.519689, 0.659951),
	(0.965590, 0.526500, 0.659309),
	(0.967876, 0.533331, 0.658822),
	(0.970075, 0.540181, 0.658492),
	(0.972187, 0.547049, 0.658319),
	(0.974214, 0.553934, 0.658309),
	(0.976156, 0.560836, 0.658460),
	(0.978013, 0.567754, 0.658777),
	(0.979786, 0.574687, 0.659261),
	(0.981476, 0.581635, 0.659913),
	(0.983084, 0.588598, 0.660734),
	(0.984610, 0.595573, 0.661727),
	(0.986055, 0.602560, 0.662893),
	(0.987421, 0.609559, 0.664233),
	(0.988707, 0.616570, 0.665748),
	(0.989916, 0.623590, 0.667440),
	(0.991048, 0.630620, 0.669309),
	(0.992104, 0.637658, 0.671355),
	(0.993086, 0.644704, 0.673581),
	(0.993993, 0.651757, 0.675986),
	(0.994829, 0.658816, 0.678571),
	(0.995593, 0.665880, 0.681337),
	(0.996287, 0.672949, 0.684282),
	(0.996913, 0.680022, 0.687408),
	(0.997472, 0.687097, 0.690715),
	(0.997966, 0.694174, 0.694202),
	(0.998396, 0.701252, 0.697868),
	(0.998765, 0.708330, 0.701715),
	(0.999073, 0.715408, 0.705740),
	(0.999323, 0.722484, 0.709943),
	(0.999516, 0.729557, 0.714323),
	(0.999654, 0.736628, 0.718880),
	(0.999740, 0.743694, 0.723612),
	(0.999777, 0.750755, 0.728517),
	(0.999766, 0.757809, 0.733595),
	(0.999710, 0.764857, 0.738844),
	(0.999610, 0.771897, 0.744262),
	(0.999471, 0.778927, 0.749846),
	(0.999294, 0.785948, 0.755596),
	(0.999082, 0.792959, 0.761509),
	(0.998841, 0.799958, 0.767583),
	(0.998571, 0.806944, 0.773814),
	(0.998275, 0.813917, 0.780202),
	(0.997958, 0.820875, 0.786742),
	(0.997624, 0.827818, 0.793432),
	(0.997276, 0.834745, 0.800268),
	(0.996919, 0.841654, 0.807248),
	(0.996555, 0.848545, 0.814367),
	(0.996191, 0.855417, 0.821623),
	(0.995829, 0.862268, 0.829011),
	(0.995477, 0.869098, 0.836527),
	(0.995138, 0.875906, 0.844166),
	(0.994817, 0.882691, 0.851925),
	(0.994522, 0.889451, 0.859797),
	(0.994257, 0.896186, 0.867778),
	(0.994030, 0.902893, 0.875863),
	(0.993848, 0.909573, 0.884043),
	(0.993719, 0.916223, 0.892313),
	(0.993649, 0.922842, 0.900666),
	(0.993652, 0.929429, 0.909092),
	(0.993735, 0.935980, 0.917583),
	(0.993913, 0.942495, 0.926126),
	(0.994202, 0.948969, 0.934707),
	(0.994620, 0.955399, 0.943309),
	(0.995196, 0.961777, 0.951905),
	(0.995973, 0.968096, 0.960460),
	(0.997031, 0.974334, 0.968899),
];

#[derive(Debug, Clone, Copy, PartialEq, Serialize, Deserialize)]
pub enum Colormap {
	Roseus,
	Arcus,
	Lavendula,
	Magma,
}

impl Colormap {
	pub fn get_color(self, t: f32) -> Color32 {
		match self {
			Self::Roseus => get_map_color(&ROSEUS_DATA, t),
			Self::Arcus => get_map_color(&ARCUS_DATA, t),
			Self::Lavendula => get_map_color(&LAVENDULA_DATA, t),
			Self::Magma => {
				let t = t.clamp(0.0, 1.0);

				let (r, g, b) = if t < 0.2 {
					let s = t / 0.2;
					(0.001 + s * 0.131, 0.0 + s * 0.025, 0.014 + s * 0.227)
				} else if t < 0.4 {
					let s = (t - 0.2) / 0.2;
					(0.132 + s * 0.347, 0.025 + s * 0.041, 0.241 + s * 0.224)
				} else if t < 0.6 {
					let s = (t - 0.4) / 0.2;
					(0.479 + s * 0.286, 0.066 + s * 0.159, 0.465 + s * 0.004)
				} else if t < 0.8 {
					let s = (t - 0.6) / 0.2;
					(0.765 + s * 0.180, 0.225 + s * 0.339, 0.469 - s * 0.169)
				} else {
					let s = (t - 0.8) / 0.2;
					(0.945 + s * 0.046, 0.564 + s * 0.360, 0.300 + s * 0.463)
				};

				Color32::from_rgb(
					(r.clamp(0.0, 1.0) * 255.0) as u8,
					(g.clamp(0.0, 1.0) * 255.0) as u8,
					(b.clamp(0.0, 1.0) * 255.0) as u8,
				)
			},
		}
	}
}

trait Lerp {
	fn lerp(&self, other: Self, t: f32) -> Self;
}

impl Lerp for f32 {
	fn lerp(&self, other: Self, t: f32) -> Self {
		self * (1. - t) + other * t
	}
}

impl Lerp for ColorTuple {
	fn lerp(&self, other: Self, t: f32) -> Self {
		(
			self.0.lerp(other.0, t),
			self.1.lerp(other.1, t),
			self.2.lerp(other.2, t),
		)
	}
}

fn get_map_color(data: &[ColorTuple], t: f32) -> Color32 {
	let t = t.clamp(0., 1.) * data.len() as f32;

	let i = t.floor() as usize;
	let f = t.fract();

	if f <= f32::EPSILON {
		let (r, g, b) = data[i];
		return Color32::from_rgb((r * 255.) as u8, (g * 255.) as u8, (b * 255.) as u8);
	}

	let a = data[i];
	let b = data[i + 1];
	let (r, g, b) = a.lerp(b, f);

	Color32::from_rgb((r * 255.) as u8, (g * 255.) as u8, (b * 255.) as u8)
}
